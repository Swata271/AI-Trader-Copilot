**AI-Trader-Copilot: 构建您的私人AI股票投研团队**

**一个基于 n8n 和多AI Agent 协同的、全自动化的、具备自主学习能力的A股市场机会扫描与决策支持系统。**

1. **项目概述**

在信息爆炸、瞬息万变的股票市场中，普通投资者面临着前所未有的挑战：如何高效地处理海量信息？如何建立并严格执行一套科学的交易系统？

这个项目不是一个试图预测未来的“炒股机器人”，而是一个**不知疲倦、绝对理性、博览群书**的“**AI投研团队**”。它存在的唯一目的，是为您（决策者）完成所有繁重的、耗时的、且容易被情绪干扰的研究工作，并将最终的、凝聚了AI集体智慧的、包含了\*\*“战略评估”**与**“战atsu计划”\*\*的深度报告，准时送达您的手中。

**这个的核心设计哲学是“人机协同，AI赋能”**。AI负责“**数据与分析**”，而您，负责最终的“**智慧与决策**”。

这篇文档，不仅将指导您如何一步步地复现这个强大的自动化系统，更将分享在整个构建过程中，从最初的构想到最终的实现，所经历的所有思考、踩过的每一个坑、以及最终沉淀下来的宝贵经验。这不仅是一份技术手册，更是探索AI自动化边界的“航海日志”。

**二、核心功能**

**1.每日自动运行**: 无需任何人工干预，在您设定的时间（例如，每日开盘前）自动启动。

**2.智能热点发现**: 主动通过AI搜索引擎 (Tavily)，发现当前A股市场最热门的投资题材。

**3.AI龙头挖掘**: 自动从热门题材中，挖掘出最具代表性的龙头股票，形成“每日金股池”。

**4.AI专家委员会会诊**:为“金股池”中的**每一只股票**，都组建一个由**六位**不同领域的虚拟“专家AI”组成的委员会。专家们**并行地**、从**基本面、行业前景、市场情绪、宏观经济、策略匹配、研报分析**六大维度，进行**360度的深度研究**。

**5.AI基金经理量化决策**:由一位“AI基金经理”，对六位专家的报告进行**加权评分**，计算出**综合得分**，完成**初步评估**。

**6.AI技术战术大师**:对于通过了战略评估的“潜力股”，由最专业的“AI技术战-术师”，通过分析**最原始的K线数据**（通过新浪财经API），制定**具体的、可执行的买卖点计划**。

**7.自主学习与进化**:系统会自动将每日的预测，存入“**记忆数据库**”（飞书多维表格）；通过独立的“**复盘工作流**”，每日自动验证历史预测的成败；通过“**AI元认知教练**”，**每周**对所有成败案例进行**深度反思**，提炼出“**经验教训**”，并将其作为**新的智慧**，注入到第二天的预测模型中，实现**持续的自我进化**！

**8.自动化报告分发**:将最终的、包含了所有战略和战术分析的“**AI投研晨报**”，自动地、批量地创建为一篇篇**表格**，并存入您指定的多维表格里。

**二、技术栈** 

**1.自动化引擎**: **n8n** (最后选择了自托管在**阿里云轻量应用服务器**上，通过**宝塔面板 + Docker**进行部署，以实现7x24小时在线)。

**2.核心AI大脑**: **DeepSeek-V2** (作为主力分析引擎，因其无与伦比的性价比和强大的性能) & **豆包-Pro** (用于处理超长上下文的“复盘学习”任务) & **OpenRouter** （里面有集成了大量ai模型，可以通过关键词筛选出性价比高的模型） 。

**3.AI搜索引擎**: **Tavily AI** (用于“热点发现”和“自主研究”)。

**4.A股数据源**: **新浪财经** 公开API (用于获取实时行情和历史K线数据)。

**5.记忆数据库 & 报告发布**: **飞书 (Lark)** (使用其“多维表格”作为数据库)。

3. **搭建流程 & 经验教训** 

**一、n8n工作流的部署 (云端部署)**

1. **服务器选择**: 为什么最终从 Oracle Cloud 和 Google Cloud 的“永久免费”方案，转向了**付费的阿里云轻量应用服务器**？

**经验**: Oracle Cloud “永久免费”虽好，但注册流程过于玄学和配置的限制，会消耗大量不必要的时间。Google Cloud复杂且不透明的定价结构让人望而止步。对于一个严肃的项目，一个稳定、高速、对新手友好的国内服务器，其价值远超其成本。而且阿里云轻量应用服务器一年的费用才几十，成本不高，足够运行一般项目。

1. **环境部署**: “原生命令行” vs “宝塔面板”

**体会**: 对于不熟悉Linux的，**宝塔Linux面板** 是一个“降维打击”级别的神器。它将所有复杂的命令行操作，都变成了简单的鼠标点击。其中遇到了不知道如何部署n8n的情况，结果发现他可以在宝塔页面的docker里搜索下载（如果你之前部署在本地的docker上面的话，需要在宝塔上的n8n重新部署一遍）。

**二、AI交易团队的组建 (工作流A的设计)**

1. **从“单一AI”到“专家委员会”的进化**:

**体会**:最初试图让一个AI完成所有分析，但很快发现，这会导致“思维固化”和“深度不足”。最终，我设计的“**六大专家AI并行会诊 + AI基金经理最终决策**”的架构，完美地模拟了真实世界的投研流程，极大地提升了分析的客观性和深度。

1. **数据获取的“血泪史”**:

**经验**: 这是我花费时间最多的地方。从 Alpha Vantage 的功能下线，到 新浪财经 的反爬虫，再到 聚合数据 的次数限制，最终确认了 “Tavily发现机会 + 新浪提供硬数据”的混合模式是最高效的。

**教程**: 为 HTTP Request 节点，添加 User-Agent和 Referee“伪装头”，来绕过常见的反爬虫机制。

1. **K线分析的“灵魂拷问”**: “AI解读观点” vs “AI解读数据”

**体会**: 让AI去“阅读”别人写的技术分析文章，结果非常不稳定。最终，让AI“战术大师”（一个节点）**直接读取最原始的K线数据数组**，并赋予它一个包含**专业指标解读**的Prompt，才解锁了它的“战术制定”能力。

**三、让AI拥有“记忆”和“智慧” (工作流B & C的设计)**

1. **“记忆数据库”的选择**: “Google Sheets” vs “飞书多维表格”

**经验**: 两者都非常强大。但如果您希望所有工作都在一个生态内闭环，**飞书多维表格** 是最终的、最无缝的选择。

**踩坑记录**: 务必注意“多维表格”和“知识库里的表格”的**API是完全不同**的！以及，在n8n中写入数据时，要严格确保**字段类型**（数字 vs 文本）和**列名**的绝对一致。

1. **构建“反馈循环”**:

**设计哲学**: “没有复盘，就没有成长”。其中设计的“**工作流B: 每日复盘**”，是整个系统能够“进化”的基石。

**教程**: 如何配置 Google Sheets 或 Lark 节点的 Search/Get 和 Update 功能，来实现对历史数据的自动验证和回写。

1. **AI的“自我进化”**:

**体会**: “**工作流 C: 每周学习**”，是整个系统的“灵魂”。其中ai agent的 Prompt，是整个项目中最具创造性的部分。它不解决眼前的问题，而是**试图从历史中，找出解决未来问题的“规律”**。

**教程**: 如何将“学习成果” (Learning\_Log)，**重新注入**到第二天的“工作流 A”中，形成一个完美的、生生不息的**自进化闭环**。

**四、最终的“成果交付” (飞书集成)**

1. **“消息” vs “多维表格”**:

**经验**: “机器人消息”适合高频的、即时的**通知**。“多维表格”则适合**沉淀**每日的、完整的、可供团队协作的**深度报告**。最终选择了后者。

1. **与飞书API的“终极搏斗”**:

**踩坑记录**: 这是遇到的最复杂的权限问题。从“应用未发布”、“API权限不足”、“可用范围过窄”到“知识库类型错误”，几乎踩遍了所有的坑。

**最终结论**: 对于复杂的、需要写入内容的场景，**使用“飞书多维表格”的API，远比“知识库/云文档”的API要稳定和简单得多**。

**五、如何使用**

1. **准备好您的“武器库”**:注册阿里云、飞书、DeepSeek、Tavily 等所有需要的账号，并获取API密钥。
1. **部署 n8n**: 按照第一章的指导，在您的云服务器上，通过宝塔面板+Docker，部署 n8n。
1. **配置凭证**: 在 n8n 的 Credentials 中，逐一添加您获取的所有 API 密钥。
1. **创建“数据库”**: 在您的飞书多维表格中，按照第三章的指导，创建 Daily\_Predictions 和 Learning\_Log 这两个数据表。
1. **激活工作流**:在 n8n 中，将所有三个工作流右上角的开关，都设置为 **Active**。
